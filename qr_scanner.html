<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mikrotik QR Scanner</title>
    <style>body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;background-color:#f0f4f8;min-height:100vh;display:flex;align-items:center;justify-content:center}.container{max-width:400px;width:90%;background:#fff;padding:25px;border-radius:16px;box-shadow:0 10px 25px rgba(0,0,0,.08);text-align:center}h1{color:#2c3e50;margin-top:0;font-size:24px;font-weight:600;margin-bottom:20px}#video-container{width:100%;max-width:300px;height:225px;margin:20px auto;border:2px solid #e0e0e0;border-radius:12px;overflow:hidden;position:relative;background-color:#f8f8f8}#qr-video{width:100%;height:100%;object-fit:cover;display:block}#scan-region{position:absolute;top:0;left:0;width:100%;height:100%;border:2px solid transparent;box-sizing:border-box;z-index:10}#scan-region.active{border-color:#4caf50;animation:scan-animation 2s infinite}@keyframes scan-animation{0%{border-color:rgba(76,175,80,.2)}50%{border-color:rgba(76,175,80,.8)}100%{border-color:rgba(76,175,80,.2)}}.scan-line{position:absolute;height:2px;width:100%;background:linear-gradient(90deg,transparent,#4caf50,transparent);z-index:11;top:50%;animation:scan-line 2s linear infinite}@keyframes scan-line{0%{top:20%;opacity:1}50%{opacity:.5}100%{top:80%;opacity:1}}button{display:block;width:80%;margin:15px auto;padding:12px 0;background-color:#3498db;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 6px rgba(52,152,219,.2)}button:hover{background-color:#2980b9;transform:translateY(-2px);box-shadow:0 6px 8px rgba(52,152,219,.25)}button:active{transform:translateY(0)}#status{padding:12px;margin:15px 0;font-weight:500;color:#555;border-radius:8px;background-color:#f8f9fa}.error{color:#e74c3c;background-color:#fdecea}.success{color:#27ae60;background-color:#e8f8f2}.hidden{display:none}#detected-url{word-break:break-all;margin:15px 0;padding:12px;background-color:#edf2f7;border-radius:8px;border-left:4px solid #3498db;text-align:left;font-size:14px}.icon{display:block;width:60px;height:60px;margin:0 auto 15px;fill:#3498db}</style>
</head>
<body>
    <div class="container">
        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 11h8V3H3v8zm2-6h4v4H5V5zm8-2v8h8V3h-8zm6 6h-4V5h4v4zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm13-2h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"/>
        </svg>
        
        <h1>Mikrotik QR Scanner</h1>
        
        <div id="status">Initializing camera...</div>
        <div id="detected-url" class="hidden"></div>
        
        <div id="video-container">
            <video id="qr-video" playsinline autoplay></video>
            <div id="scan-region"></div>
            <div class="scan-line"></div>
        </div>
        
        <button id="start-camera" class="hidden">Start Camera</button>
        <button id="stop-camera">Stop Camera</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
    <script>
    (function(){var _0x4e8f=["qr-video","getElementById","start-camera","stop-camera","status","scan-region","detected-url","camera","stream","scanning","interval","scan","textContent","Requesting camera access...","environment","mediaDevices","getUserMedia","srcObject","setAttribute","playsinline","true","autoplay","Camera started - scanning for QR codes","className","success","add","hidden","classList","remove","error","log","Camera error: ","message","Error: ","Camera API not supported in this browser","disabled","videoWidth","createElement","canvas","getContext","2d","width","height","drawImage","getImageData","data","dontInvert","QR Code detected!","active","Detected URL: ","trim","http://","startsWith","https://","Redirecting to URL...","href","location","Redirect error: ","Error redirecting: ","addEventListener","click","getTracks","stop","Camera stopped","loadedmetadata","Video metadata loaded","play","Video playback started","Video error: ","unknown error"];const _0x5641={camera:document[_0x4e8f[1]](_0x4e8f[0]),startBtn:document[_0x4e8f[1]](_0x4e8f[2]),stopBtn:document[_0x4e8f[1]](_0x4e8f[3]),status:document[_0x4e8f[1]](_0x4e8f[4]),scanRegion:document[_0x4e8f[1]](_0x4e8f[5]),detectedUrl:document[_0x4e8f[1]](_0x4e8f[6]),init:function(){this[_0x4e8f[7]]=null;this[_0x4e8f[8]]=null;this[_0x4e8f[9]]=false;this[_0x4e8f[10]]=null;this.startCamera();this.setupListeners()},startCamera:async function(){try{this.status[_0x4e8f[12]]=_0x4e8f[13];const _0x1a81={video:{facingMode:_0x4e8f[14],width:{ideal:1280},height:{ideal:720}}};this[_0x4e8f[8]]= await navigator[_0x4e8f[15]][_0x4e8f[16]](_0x1a81);this.camera[_0x4e8f[17]]=this[_0x4e8f[8]];this.camera[_0x4e8f[18]](_0x4e8f[19],_0x4e8f[20]);this.camera[_0x4e8f[18]](_0x4e8f[21],_0x4e8f[20]);this.status[_0x4e8f[12]]=_0x4e8f[22];this.status[_0x4e8f[23]]=_0x4e8f[24];this.startBtn[_0x4e8f[27]][_0x4e8f[25]](_0x4e8f[26]);this.stopBtn[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[26]);this[_0x4e8f[9]]=true;if(this[_0x4e8f[10]]){clearInterval(this[_0x4e8f[10]])};this[_0x4e8f[10]]=setInterval(()=>this[_0x4e8f[11]](),200)}catch(_0x4b32){console[_0x4e8f[30]](_0x4e8f[31],_0x4b32);this.status[_0x4e8f[12]]=_0x4e8f[31]+(_0x4b32[_0x4e8f[32]]||_0x4e8f[33]);this.status[_0x4e8f[23]]=_0x4e8f[29];this.startBtn[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[26]);this.stopBtn[_0x4e8f[27]][_0x4e8f[25]](_0x4e8f[26])}},checkSupport:function(){if(!navigator[_0x4e8f[15]]||!navigator[_0x4e8f[15]][_0x4e8f[16]]){this.status[_0x4e8f[12]]=_0x4e8f[34];this.status[_0x4e8f[23]]=_0x4e8f[29];this.startBtn[_0x4e8f[35]]=true;return false}return true},scan:function(){if(!this[_0x4e8f[9]]||!this.camera[_0x4e8f[36]])return;const _0x4d1d=document[_0x4e8f[37]](_0x4e8f[38]);const _0x4e2a=_0x4d1d[_0x4e8f[39]](_0x4e8f[40]);_0x4d1d[_0x4e8f[41]]=this.camera[_0x4e8f[36]];_0x4d1d[_0x4e8f[42]]=this.camera.videoHeight;_0x4e2a[_0x4e8f[43]](this.camera,0,0,_0x4d1d[_0x4e8f[41]],_0x4d1d[_0x4e8f[42]]);const _0xc3aa=_0x4e2a[_0x4e8f[44]](0,0,_0x4d1d[_0x4e8f[41]],_0x4d1d[_0x4e8f[42]]);const _0x2e7c=jsQR(_0xc3aa[_0x4e8f[45]],_0xc3aa[_0x4e8f[41]],_0xc3aa[_0x4e8f[42]],{inversionAttempts:_0x4e8f[46]});if(_0x2e7c){console[_0x4e8f[30]]("QR Code detected:",_0x2e7c[_0x4e8f[45]]);this.status[_0x4e8f[12]]=_0x4e8f[47];this.status[_0x4e8f[23]]=_0x4e8f[24];this.scanRegion[_0x4e8f[27]][_0x4e8f[25]](_0x4e8f[48]);this.detectedUrl[_0x4e8f[12]]=_0x4e8f[49]+_0x2e7c[_0x4e8f[45]];this.detectedUrl[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[26]);let _0xa8a6=_0x2e7c[_0x4e8f[45]][_0x4e8f[50]]();if(!_0xa8a6[_0x4e8f[52]](_0x4e8f[51])&&!_0xa8a6[_0x4e8f[52]](_0x4e8f[53])){_0xa8a6='http://'+_0xa8a6};this[_0x4e8f[9]]=false;setTimeout(()=>{this.status[_0x4e8f[12]]=_0x4e8f[54];try{window[_0x4e8f[56]][_0x4e8f[55]]=_0xa8a6}catch(_0x3082){console[_0x4e8f[29]](_0x4e8f[57],_0x3082);this.status[_0x4e8f[12]]=_0x4e8f[58]+_0x3082[_0x4e8f[32]];this.status[_0x4e8f[23]]=_0x4e8f[29];this[_0x4e8f[9]]=true}},1000)}else{this.scanRegion[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[48])}},stopCamera:function(){this[_0x4e8f[9]]=false;if(this[_0x4e8f[10]]){clearInterval(this[_0x4e8f[10]]);this[_0x4e8f[10]]=null}if(this[_0x4e8f[8]]){this[_0x4e8f[8]][_0x4e8f[61]]().forEach(_0x45a8=>{_0x45a8[_0x4e8f[62]]()});this.camera[_0x4e8f[17]]=null}this.stopBtn[_0x4e8f[27]][_0x4e8f[25]](_0x4e8f[26]);this.startBtn[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[26]);this.status[_0x4e8f[12]]=_0x4e8f[63];this.scanRegion[_0x4e8f[27]][_0x4e8f[28]](_0x4e8f[48]);this.detectedUrl[_0x4e8f[27]][_0x4e8f[25]](_0x4e8f[26])},setupListeners:function(){this.startBtn[_0x4e8f[59]](_0x4e8f[60],()=>this.startCamera());this.stopBtn[_0x4e8f[59]](_0x4e8f[60],()=>this.stopCamera());this.camera[_0x4e8f[59]](_0x4e8f[64],function(){console[_0x4e8f[30]](_0x4e8f[65])});this.camera[_0x4e8f[59]](_0x4e8f[66],function(){console[_0x4e8f[30]](_0x4e8f[67])});this.camera[_0x4e8f[59]](_0x4e8f[29],(_0x4af5)=>{console[_0x4e8f[29]](_0x4e8f[68],_0x4af5);this.status[_0x4e8f[12]]=_0x4e8f[68]+(this.camera[_0x4e8f[29]]?this.camera[_0x4e8f[29]][_0x4e8f[32]]:_0x4e8f[69]);this.status[_0x4e8f[23]]=_0x4e8f[29]})}};document[_0x4e8f[59]]("DOMContentLoaded",function(){if(_0x5641.checkSupport()){_0x5641.init()}})})();
    </script>
</body>
</html>
